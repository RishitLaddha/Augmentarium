<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ app_name }} • Results</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,0.06); }
    body {
      background: radial-gradient(1200px 800px at 20% 10%, #c7d2fe 0%, transparent 50%),
                  radial-gradient(900px 700px at 90% 30%, #fecdd3 0%, transparent 50%),
                  radial-gradient(800px 600px at 60% 80%, #bbf7d0 0%, transparent 50%),
                  #0b1020;
    }
    .tile:hover .hints { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body class="min-h-screen text-slate-100">
  <header class="py-8 text-center">
    <h1 class="text-3xl md:text-4xl font-bold tracking-tight">{{ app_name }}</h1>
    <p class="mt-2 text-slate-300">Token: <span class="font-mono bg-black/30 px-2 py-0.5 rounded">{{ token }}</span></p>
  </header>

  <main class="container mx-auto px-4">
    <div class="max-w-5xl mx-auto mb-6 flex flex-wrap items-center justify-between gap-3">
      <a href="{{ url_for('index') }}" class="rounded-xl bg-slate-700 hover:bg-slate-600 px-4 py-2 text-sm font-semibold">Try another</a>
      <div class="flex items-center gap-3">
        <a href="{{ url_for('download_zip', token=token) }}" class="rounded-xl bg-emerald-600 hover:bg-emerald-500 px-4 py-2 text-sm font-semibold shadow-lg shadow-emerald-900/30">Download All</a>
      </div>
    </div>

    <div class="max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Original -->
      <div class="tile relative overflow-hidden rounded-2xl ring-1 ring-white/10 glass group">
        <img src="{{ url_for('static', filename='outputs/' + token + '/' + original_filename) }}" alt="Original" class="w-full h-auto object-cover">
        <div class="absolute top-3 left-3 rounded-lg bg-slate-800/80 px-2.5 py-1 text-xs font-semibold">Original</div>
        <div class="absolute bottom-0 left-0 right-0 p-3 transition opacity-0 translate-y-3 hints">
          <div class="rounded-xl bg-black/50 px-3 py-2 text-xs text-slate-200">
            Baseline for comparisons.
          </div>
        </div>
      </div>

      {% for item in items %}
      <div class="tile relative overflow-hidden rounded-2xl ring-1 ring-white/10 glass group">
        <img src="{{ url_for('static', filename='outputs/' + token + '/' + item.filename) }}" alt="{{ item.name }}" class="w-full h-auto object-cover">
        <div class="absolute top-3 left-3 rounded-lg {{ item.verdict_color }} px-2.5 py-1 text-xs font-semibold">{{ item.verdict_label }}</div>
        <div class="absolute top-3 right-3 rounded-lg bg-slate-800/80 px-2.5 py-1 text-xs">{{ item.name }}</div>

        <div class="absolute bottom-0 left-0 right-0 p-3 transition opacity-0 translate-y-3 hints">
          <div class="rounded-xl bg-black/55 px-3 py-2 text-xs text-slate-100 space-y-1">
            {% for h in item.hints %}
              <div>• {{ h }}</div>
            {% endfor %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <section class="max-w-4xl mx-auto mt-10 text-slate-300 text-sm leading-relaxed">
      <h2 class="text-lg font-semibold mb-2">How to read these labels</h2>
      <p>
        We compare each augmented image to the original using distribution shifts (intensity & hue), structure (SSIM), exposure (clipping),
        brightness/saturation changes, and a sharpness proxy. Instead of numbers, you get quick, human-friendly verdicts.
        “Good variety — sweet spot” is usually ideal; “Aggressive” can help robustness but check content; “Destructive” likely harms semantics.
      </p>
    </section>
  </main>

  <footer class="mt-16 mb-8 text-center text-slate-400 text-xs">
    Built with Flask + Pillow + NumPy + scikit-image
  </footer>
</body>
</html>
